<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>sql</title><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css"><script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script></head><body><nav class="main-nav"><a href="/">Home</a><a href="/archives">Archives</a></nav><div class="profile"><section id="wrapper"><header id="header"><a href="https://github.com/Funwentao"><img class="2x" id="avatar" src="/images/avatar.jpg"></a><h1>fun's blog</h1><h2></h2></header></section></div><section class="post" id="wrapper"><article><header><h1>sql</h1><h2 class="headline">Dec 12, 2018 11:06·377 words
·1 minutes read<span class="tags"></span></h2></header><div id="toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#最近看SQL必知必会，记录下笔记"><span class="toc-text">最近看SQL必知必会，记录下笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#结束sql语句"><span class="toc-text">结束sql语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sql和大小写"><span class="toc-text">sql和大小写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用空格"><span class="toc-text">使用空格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#检索不同的值"><span class="toc-text">检索不同的值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#限制结果"><span class="toc-text">限制结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#偏移"><span class="toc-text">偏移</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#排序"><span class="toc-text">排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#范围值检查"><span class="toc-text">范围值检查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#空值检查"><span class="toc-text">空值检查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#拼接字段、使用别名"><span class="toc-text">拼接字段、使用别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数"><span class="toc-text">函数</span></a></li></ol></li></ol></div><section id="post-body"><h2 id="最近看SQL必知必会，记录下笔记"><a href="#最近看SQL必知必会，记录下笔记" class="headerlink" title="最近看SQL必知必会，记录下笔记"></a>最近看SQL必知必会，记录下笔记</h2><h3 id="结束sql语句"><a href="#结束sql语句" class="headerlink" title="结束sql语句"></a>结束sql语句</h3><blockquote>
<p>多条sql语句必须以分号分割。多数dbms不需要再单挑sql语句后加分号</p>
</blockquote>
<h3 id="sql和大小写"><a href="#sql和大小写" class="headerlink" title="sql和大小写"></a>sql和大小写</h3><blockquote>
<p>sql语句不区分大小写，对sql关键字使用大写，对列名和表名使用小写</p>
</blockquote>
<h3 id="使用空格"><a href="#使用空格" class="headerlink" title="使用空格"></a>使用空格</h3><blockquote>
<p>所有的空格都被忽略，可以写成一行或者多行</p>
</blockquote>
<h3 id="检索不同的值"><a href="#检索不同的值" class="headerlink" title="检索不同的值"></a>检索不同的值</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> vend_id <span class="keyword">FROM</span> Products;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>DISTINCT关键字作用于所有的列，不仅仅是跟在其后的那一列。除非多列完全相同，否则所有的行都会被检索出来。</p>
</blockquote>
<h3 id="限制结果"><a href="#限制结果" class="headerlink" title="限制结果"></a>限制结果</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- SQL Servser Access中使用TOP关键字来限制最多返回多少行</span></span><br><span class="line"><span class="keyword">SELECT</span> TOP <span class="number">5</span> prod_name <span class="keyword">FROM</span> Products;</span><br><span class="line"><span class="comment">-- DB2</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> Products <span class="keyword">FETCH</span> <span class="keyword">FIRST</span> <span class="number">5</span> <span class="keyword">ROWS</span> <span class="keyword">ONLY</span>;</span><br><span class="line"><span class="comment">--Oracle</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> Products <span class="keyword">WHERE</span> <span class="keyword">ROWNUM</span> &lt;= <span class="number">5</span>;</span><br><span class="line"><span class="comment">-- MySQL MariaDB PostgreSQL SQLite</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> Products <span class="keyword">LIMIT</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<h3 id="偏移"><a href="#偏移" class="headerlink" title="偏移"></a>偏移</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--会检索第2行，而不是第1行</span></span><br><span class="line">LIMIT 1 OFFSET 1</span><br><span class="line"><span class="comment">--MySQL和MariaDB支持简化版的LIMIT，即LIMIT 3，4</span></span><br></pre></td></tr></table></figure>
<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name <span class="keyword">FROM</span> Products <span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_price, prod_name;</span><br><span class="line"><span class="comment">--DESC关键字只应用到直接位于其前面的列名。如果想在多个裂伤进行降序排序，必须对每一列指定DESC关键字。</span></span><br></pre></td></tr></table></figure>
<h3 id="范围值检查"><a href="#范围值检查" class="headerlink" title="范围值检查"></a>范围值检查</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_name, prod_price <span class="keyword">FROM</span> Products <span class="keyword">WHERE</span> prod_price <span class="keyword">BETWEEN</span> <span class="number">5</span> <span class="keyword">AND</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<h3 id="空值检查"><a href="#空值检查" class="headerlink" title="空值检查"></a>空值检查</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> Products <span class="keyword">WHERE</span> prod_price <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<h3 id="拼接字段、使用别名"><a href="#拼接字段、使用别名" class="headerlink" title="拼接字段、使用别名"></a>拼接字段、使用别名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--mySQL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">Concat</span>(vend_name, <span class="string">'('</span>, vend_country, <span class="string">')'</span>) <span class="keyword">AS</span> vend_title <span class="keyword">FROM</span> Vendors <span class="keyword">ORDER</span> <span class="keyword">BY</span> vend_name;</span><br><span class="line"><span class="comment">--在很多dbms中，as关键字是可选的，不过最好使用它，这被视为一条最佳实践</span></span><br></pre></td></tr></table></figure>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p><img src="./db_different.jpg" alt="avatar"><br><img src="./functions.jpg" alt="avatar"></p>
</section><nav id="post-nav"><span class="prev"></span><span class="next"></span></nav></article></section><footer id="footer"><div id="social"><a class="symbol" href="https://github.com/Funwentao"><i class="fa fa-github"></i></a></div><p class="small">© Copyright 2018 &nbsp;<i class="fa fa-heart" aria-hidden="true">&nbsp;fangwentao</i></p></footer><script>hljs.initHighlightingOnLoad();</script></body></html>